{
    "collab_server" : "",
    "contents" : "# a way to bring all our scripts from somewhere eld \n\n\n\n\n# 1. load data\n\n#library(tidyverse)\n#library(here) #handle paths inside a project, it simplifies all paths. If you are dealing with a project\n#there is no need to set a working directory. \n\n#here(\"data\", \"poisson_data.csv\")\n\n# a way to load the data in a more simplified path\nmy_data_raw <- read_csv(here(\"data\", \"poisson_data.csv\")) %>%\n  mutate(., temp_c = temp - mean (temp))\n\n#head(my_data_raw)\n\n\n\n# 2. check structure\nglimpse(my_data_raw)\n\n\n\n\n# 3. fit inclusive and nested models\n#    test for interactions/main effects\n\n\nmod_nul <- glm(units~1, data = my_data_raw, family = poisson(link = \"log\"))\nsummary(mod_nul)\n\nmod_temp <-glm(units ~ temp, data = my_data_raw, family = poisson(link = \"log\"))\nsummary(mod_temp)\n\nmod_city <-glm(units~ city, data = my_data_raw, family = poisson(link = \"log\"))\n\nmod_add <-glm(units~ temp + city , data = my_data_raw, family = poisson(link = \"log\"))\nsummary(mod_add)\n\nmod_int <-glm(units ~ temp * city, data = my_data_raw, family = poisson(link = \"log\"))\nsummary(mod_int) # * additive effect and interaction x+z+x:z == x*a\n\n#main effect of temp chi square distribution that give the p value\n\nanova(mod_nul, mod_temp, test =\"Chisq\")\n\n#main effect of city\n\nanova(mod_nul, mod_city, test =\"Chisq\")\n\n#interacticon\n\nanova(mod_add, mod_int, test= \"Chisq\")\n\n#summary of best moder\n\nsummary(mod_int)\n\n\n\nexp(coef(mod_int) [2]) #4% increase\nexp(coef(mod_int) [3]) # 65% decrease at mean\nexp(coef(mod_int) [2]) + coef(mod_int) [4] # if it's negative add the 1~ \n\ncoef(mod_int)\n\n# 4. summary of best model\n\n\n\n\n# 5. write up of output\n\n\n\n# 6. generate and save plot\n# pch changes the type of points, assign it to an object\npoisson_reg<- ggplot(my_data_raw, aes(x = temp_c, y= units, color = city))+\n  geom_point(pch = 21) + geom_smooth(method = glm, \n                                     method.args = list(family = \"poisson\"))\n# how to find the graph  \npoisson_reg\n\n#how to save it in the folder form R project\n#ggsave(filename = \"./figs/poisson_plot.png\",\n#       plot = poisson_reg, width = 6, height = 4, \n#       unit = \"in\")\n\n#install package here\n\n\n",
    "created" : 1525829233603.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3499739876",
    "id" : "BFDFC76F",
    "lastKnownWriteTime" : 1523990476,
    "last_content_update" : 1523990476,
    "path" : "~/Documents/rsession/glm_poisson/scripts/poisson_regression.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}